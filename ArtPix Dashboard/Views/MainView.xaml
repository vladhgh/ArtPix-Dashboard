<Window x:Class="ArtPix_Dashboard.Views.MainView"
		x:Name="Window"
		xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:local="clr-namespace:ArtPix_Dashboard.Utils"
		xmlns:ui="http://schemas.modernwpf.com/2019"
		xmlns:xf="clr-namespace:XamlFlair;assembly=XamlFlair.WPF"
        xmlns:viewmodels="clr-namespace:ArtPix_Dashboard.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        Icon="../Assets/logo.ico"
		Title="ArtPix Dashboard v1.3"
		Top="{Binding AppState.Top, Mode=TwoWay}"
		Left="{Binding AppState.Left, Mode=TwoWay}"
		Height="{Binding AppState.Height, Mode=TwoWay}"
		Width="{Binding AppState.Width, Mode=TwoWay}"
		WindowState="{Binding AppState.WindowState, Mode=TwoWay}"
		Background="{DynamicResource SystemControlPageBackgroundMediumAltMediumBrush}"
        ui:WindowHelper.UseModernWindowStyle="True"
		ui:TitleBar.ExtendViewIntoTitleBar="True"
		ui:TitleBar.IsBackEnabled="True"
		ui:TitleBar.Style="{DynamicResource AppTitleBarStyle}"
		ui:TitleBar.ButtonStyle="{DynamicResource AppTitleBarButtonStyle}"
		ui:TitleBar.BackButtonStyle="{DynamicResource AppTitleBarBackButtonStyle}">
	<Window.Resources>
		<local:PixelsToGridLengthConverter x:Key="PixelsToGridLength" />

		<Style x:Key="AppTitleBarStyle" TargetType="ui:TitleBarControl">
			<Setter Property="ui:ThemeManager.RequestedTheme" Value="Dark" />
		</Style>
		<Style x:Key="AppTitleBarButtonStyle" TargetType="ui:TitleBarButton">
			<Setter Property="IsActive" Value="{Binding IsActive, ElementName=Window}" />
			<Setter Property="Background" Value="{DynamicResource SystemControlPageTextChromeBlackMediumLowBrush}" />
		</Style>
		<Style x:Key="AppTitleBarBackButtonStyle" TargetType="ui:TitleBarButton" BasedOn="{StaticResource TitleBarBackButtonStyle}">
			<Setter Property="IsActive" Value="{Binding IsActive, ElementName=Window}" />
			<Setter Property="Background" Value="{DynamicResource SystemControlPageTextChromeBlackMediumLowBrush}" />
		</Style>
    </Window.Resources>

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition />
		</Grid.RowDefinitions>

		<Grid
				x:Name="AppTitleBar"
                Background="{DynamicResource SystemControlPageBackgroundMediumAltMediumBrush}"
				Height="{Binding ElementName=Window, Path=(ui:TitleBar.Height)}">

			<Grid.Style>
				<Style TargetType="Grid">
					<Setter Property="TextElement.Foreground" Value="{DynamicResource SystemControlForegroundBaseHighBrush}" />
					<Style.Triggers>
						<DataTrigger Binding="{Binding IsActive, ElementName=Window}" Value="False">
							<Setter Property="TextElement.Foreground" Value="{DynamicResource SystemControlDisabledBaseMediumLowBrush}" />
						</DataTrigger>
					</Style.Triggers>
				</Style>
			</Grid.Style>
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="{Binding ElementName=Window, Path=(ui:TitleBar.SystemOverlayLeftInset), Converter={StaticResource PixelsToGridLength}}" />
				<ColumnDefinition Width="Auto" />
				<ColumnDefinition />
				<ColumnDefinition Width="Auto" />
				<ColumnDefinition Width="{Binding ElementName=Window, Path=(ui:TitleBar.SystemOverlayRightInset), Converter={StaticResource PixelsToGridLength}}" />
			</Grid.ColumnDefinitions>
			
			<Image Source="/Assets/ap3dlogo.png" MaxHeight="20" Margin="10 10 0 5" Grid.Column="1"/>
			<TextBlock
						Grid.Column="0"
						Grid.ColumnSpan="5"
						FontSize="13"
						FontWeight="Bold"
						Margin="0 5 0 0"
						HorizontalAlignment="Center"
						VerticalAlignment="Center"
						Text="{Binding ElementName=Window, Path=Title}" />
			
		</Grid>

        <ui:ProgressRing Name="ProgressRing" Grid.Row="1" Margin="10 0 0 0" Height="50" Width="50" IsActive="{Binding AppState.IsLoading}"/>
		<ui:NavigationView
											x:Name="MainNavigationView"
											Grid.Row="1"
                                            Visibility="Hidden"
											PaneDisplayMode="Top" 
											IsTabStop="True"
											SelectionFollowsFocus="Disabled"
											IsBackButtonVisible="Visible"
											IsBackEnabled="True"
											BackRequested="MainNavigationView_BackRequested"
											IsSettingsVisible="False"
											xf:Animations.Primary="{xf:Animate BasedOn={StaticResource FadeIn}, Event=Visibility}"
											SelectedItem="{Binding AppState.SelectedItem, Mode=TwoWay}">

            <ui:NavigationView.Resources>
                <SolidColorBrush x:Key="NavigationViewTopPaneBackground" Color="Black" />
                <DoubleAnimation x:Key="an" BeginTime="0:0:4" Duration="0:0:0.5" Storyboard.TargetProperty="(ui:NavigationView.Opacity)" Storyboard.TargetName="MainNavigationView"  From="1.0" To="0.0" RepeatBehavior="Forever" AutoReverse="True" />
            </ui:NavigationView.Resources>

            <ui:NavigationView.MenuItems>
				<ui:NavigationViewItem Content="Machines Dashboard" FontWeight="Bold" Tag="MachinesDashboardView" Cursor="Hand" ToolTip="Machines Dashboard" />
				<ui:NavigationViewItem Content="Shipping Dashboard" FontWeight="Bold" Tag="ShippingDashboardView" Cursor="Hand" ToolTip="Shipping Dashboard" />
				<ui:NavigationViewItem Content="Production Issues" FontWeight="Bold" Tag="ProductionIssuesView" Cursor="Hand" ToolTip="Production Issues" />
            </ui:NavigationView.MenuItems>
			
			
			
			<ui:NavigationView.AutoSuggestBox>
				<ui:AutoSuggestBox Cursor="Hand" QueryIcon="Find" AutomationProperties.Name="Search" Width="200" QuerySubmitted="AutoSuggestBox_QuerySubmitted" PlaceholderText="Search"/>
			</ui:NavigationView.AutoSuggestBox>
			
			
			<ui:NavigationView.Header>
                <Grid Margin="0 10 25 0" >
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock
										Text="{Binding Stats.TotalCount, StringFormat=To Engrave: {0:F0}, Mode=OneWay}"
										HorizontalAlignment="Center"
										Grid.Column="2"
										FontWeight="Black"
										Style="{DynamicResource TitleTextBlockStyle}" />
                    <TextBlock
										Text="{Binding Stats.EngravedTodayCount, StringFormat=Engraved Today: {0:F0}, Mode=OneWay}"
										HorizontalAlignment="Center"
										Grid.Column="3"
										FontWeight="Black"
										Style="{DynamicResource TitleTextBlockStyle}" />
                    <TextBlock
										Text="{Binding Stats.ReadyToEngraveCount, StringFormat=Ready To Engrave: {0:F0}, Mode=OneWay}"
										HorizontalAlignment="Left"
										Grid.Column="0"
										FontWeight="Black"
										Style="{DynamicResource TitleTextBlockStyle}" />
                    <TextBlock
										Text="{Binding Stats.ProcessingCount, StringFormat=Engraving: {0:F0}, Mode=OneWay}"
										HorizontalAlignment="Center"
										Grid.Column="1"
										FontWeight="Black"
										Style="{DynamicResource TitleTextBlockStyle}"/>
                    <TextBlock
										Text="{Binding Stats.IssueCount, StringFormat=Production Issues: {0:F0}, Mode=OneWay}"
										HorizontalAlignment="Right"
										Grid.Column="4"
										FontWeight="Black"
										Style="{DynamicResource TitleTextBlockStyle}"/>
                </Grid>
            </ui:NavigationView.Header>
	  
			<ui:NavigationView.PaneFooter>
				<StackPanel Orientation="Horizontal">
                    <ui:NavigationViewItem Cursor="Hand" Tag="ShippingDashboardView" MaxWidth="60"  >
                        <ui:PersonPicture ProfilePicture="/Assets/logo.ico" MaxHeight="24"/>
                    </ui:NavigationViewItem>
                    <ui:AppBarButton Cursor="Hand" IsCompact="True" MaxWidth="60" ToolTip="Last Updated: " Label="Settings">
                        <ui:AppBarButton.Icon>
                            <ui:FontIcon
								Foreground="White"
                                FontSize="44"
                                FontFamily="Segoe MDL2 Assets" Glyph="&#xE753;" />
                        </ui:AppBarButton.Icon>
                    </ui:AppBarButton>
                    <ui:AppBarButton Cursor="Hand" Icon="Setting" ToolTip="Settings" MaxWidth="60" Label="Settings" IsCompact="True" />
				</StackPanel>
			</ui:NavigationView.PaneFooter>

            <ui:Frame x:Name="contentFrame"/>


        </ui:NavigationView>
		
		
	</Grid>
</Window>
